<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minty - Trade</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/svg+xml" href="assets/minty-logo-icon.svg">
</head>
<body>
    <!-- Burger Menu -->
    <button class="burger-menu" onclick="toggleSidebar()" aria-label="Toggle sidebar">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-brand">
            <img src="assets/minty-logo-icon.svg" alt="Minty Logo" width="40">
            <h2>Minty</h2>
        </div>
        <div class="sidebar-search">
            <input type="text" id="stock-search" placeholder="Search stocks..." aria-label="Search stocks">
            <button onclick="searchStock()" aria-label="Search"><i class="fas fa-search"></i></button>
        </div>
        <nav class="sidebar-nav">
            <a href="portfolio.html" class="sidebar-nav-link" aria-label="View Portfolio">
                <i class="fas fa-chart-pie"></i>
                <span>Portfolio</span>
            </a>
            <a href="profile.html" class="sidebar-nav-link" aria-label="View Profile">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </a>
            <a href="trade.html" class="sidebar-nav-link active" aria-label="Trade">
                <i class="fas fa-exchange-alt"></i>
                <span>Trade</span>
            </a>
            <div class="sidebar-divider"></div>
            <a href="index.html?symbol=NVDA" class="sidebar-stock-link">
                <img src="assets/nvidia-logo.svg" alt="NVIDIA Logo" width="20">
                <span>NVIDIA</span>
            </a>
            <a href="index.html?symbol=AMD" class="sidebar-stock-link">
                <img src="assets/amd-logo.svg" alt="AMD Logo" width="20">
                <span>AMD</span>
            </a>
            <a href="index.html?symbol=AAPL" class="sidebar-stock-link">
                <img src="assets/apple-logo.svg" alt="Apple Logo" width="20">
                <span>Apple</span>
            </a>
            <a href="index.html?symbol=GOOGL" class="sidebar-stock-link">
                <img src="assets/google-logo.svg" alt="Google Logo" width="20">
                <span>Google</span>
            </a>
            <a href="index.html?symbol=MSFT" class="sidebar-stock-link">
                <img src="assets/microsoft-logo.svg" alt="Microsoft Logo" width="20">
                <span>Microsoft</span>
            </a>
            <a href="index.html?symbol=TSLA" class="sidebar-stock-link">
                <img src="assets/tesla-logo.svg" alt="Tesla Logo" width="20">
                <span>Tesla</span>
            </a>
            <a href="index.html?symbol=META" class="sidebar-stock-link">
                <img src="assets/meta-logo.svg" alt="Meta Logo" width="20">
                <span>Meta</span>
            </a>
            <a href="index.html?symbol=AMZN" class="sidebar-stock-link">
                <img src="assets/amazon-logo.svg" alt="Amazon Logo" width="20">
                <span>Amazon</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <button class="btn-logout" onclick="logout()" aria-label="Log out">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </button>
        </div>
    </aside>

    <!-- Overlay -->
    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <!-- Floating Action Button -->
    <button class="fab" aria-label="Quick actions">
        <i class="fas fa-plus"></i>
        <div class="fab-menu">
            <button onclick="window.location.href='trade.html'" aria-label="Trade"><i class="fas fa-exchange-alt"></i> Trade</button>
            <button onclick="alert('Add to Watchlist (API required)')" aria-label="Add to watchlist"><i class="fas fa-star"></i> Watchlist</button>
        </div>
    </button>

    <div class="container">
        <header class="header">
            <div class="logo">
                <img src="assets/minty-logo-icon.svg" alt="Minty Logo" width="50">
                <h1>Trade</h1>
            </div>
            <button class="theme-toggle" aria-label="Toggle dark mode">
                <i class="fas fa-moon"></i>
            </button>
        </header>

        <main class="main-content">
            <div class="trading-container">
                <!-- Account Summary -->
                <section class="grid-item account-summary">
                    <h3>Account Summary</h3>
                    <div class="account-stats">
                        <div class="stat-item">
                            <span class="stat-label">Cash</span>
                            <span class="stat-value" id="cash-amount">$100,000.00</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Buying Power</span>
                            <span class="stat-value" id="buying-power">$100,000.00</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Portfolio Value</span>
                            <span class="stat-value" id="portfolio-value">$100,000.00</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Equity</span>
                            <span class="stat-value" id="equity">$100,000.00</span>
                        </div>
                    </div>
                </section>

                <!-- Trading Form -->
                <section class="grid-item trading-form">
                    <h3>Place Order</h3>
                    <form id="order-form">
                        <div class="form-group">
                            <label for="symbol">Symbol</label>
                            <select id="symbol" name="symbol" required>
                                <option value="">Select a stock...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="side">Side</label>
                            <select id="side" name="side" required>
                                <option value="buy">Buy</option>
                                <option value="sell">Sell</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="qty">Quantity</label>
                            <input type="number" id="qty" name="qty" min="1" step="1" required>
                        </div>
                        <div class="form-group">
                            <label for="price">Price (Optional - Market Order)</label>
                            <input type="number" id="price" name="price" min="0" step="0.01">
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-paper-plane"></i>
                            Place Order
                        </button>
                    </form>
                </section>

                <!-- Portfolio Positions -->
                <section class="grid-item portfolio-positions">
                    <h3>Portfolio Positions</h3>
                    <div id="positions-container">
                        <p class="no-positions">No positions yet. Start trading to see your portfolio!</p>
                    </div>
                </section>
            </div>

            <!-- Order History -->
            <section class="grid-item order-history">
                <h3>Order History</h3>
                <div class="order-filters">
                    <select id="symbol-filter">
                        <option value="">All Symbols</option>
                    </select>
                    <select id="side-filter">
                        <option value="">All Sides</option>
                        <option value="buy">Buy</option>
                        <option value="sell">Sell</option>
                    </select>
                    <select id="status-filter">
                        <option value="">All Status</option>
                        <option value="filled">Filled</option>
                        <option value="pending">Pending</option>
                        <option value="cancelled">Cancelled</option>
                    </select>
                </div>
                <div class="orders-table-container">
                    <table class="orders-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Symbol</th>
                                <th>Side</th>
                                <th>Quantity</th>
                                <th>Price</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="orders-tbody"></tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>Processing order...</p>
    </div>

    <div id="message-container" class="message-container"></div>

    <script src="main.js"></script>
    <script src="trade.js"></script>
</body>
</html>